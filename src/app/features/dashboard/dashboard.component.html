<mat-toolbar class="dashboard-toolbar">
  <mat-toolbar-row>
    <span class="toolbar-title">
      <mat-icon>face</mat-icon>
      Emotion Detection Overview
    </span>
    <span class="toolbar-spacer"></span>
    <button mat-raised-button color="accent" [matMenuTriggerFor]="exportMenu">
      <mat-icon>download</mat-icon>
      Export
    </button>
    <mat-menu #exportMenu="matMenu">
      <button mat-menu-item (click)="exportReport()">
        <mat-icon>picture_as_pdf</mat-icon>
        Export as PDF
      </button>
      <button mat-menu-item (click)="exportExcel()">
        <mat-icon>table_chart</mat-icon>
        Export as Excel
      </button>
    </mat-menu>
  </mat-toolbar-row>
</mat-toolbar>

<div class="dashboard-content">
  <div class="kpi-grid">
    <!-- Total Faces Detected -->
    <mat-card
      appearance="outlined"
      class="kpi-card"
      tabindex="0"
      role="button"
    >
      <mat-card-header>
        <div mat-card-avatar class="kpi-avatar revenue">
          <mat-icon>person_search</mat-icon>
        </div>
        <mat-card-title>{{ stats().totalFaces }}</mat-card-title>
        <mat-card-subtitle>Total Faces Detected</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="kpi-trend positive">
          <mat-icon>trending_up</mat-icon>
          <span>+12.5% from last session</span>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <mat-progress-bar mode="determinate" value="75" color="primary"></mat-progress-bar>
      </mat-card-actions>
    </mat-card>

    <!-- Active Sessions -->
    <mat-card
      appearance="outlined"
      class="kpi-card"
      tabindex="0"
      role="button"
    >
      <mat-card-header>
        <div mat-card-avatar class="kpi-avatar users">
          <mat-icon>videocam</mat-icon>
        </div>
        <mat-card-title>{{ stats().activeSessions }}</mat-card-title>
        <mat-card-subtitle>Active Detection Sessions</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="kpi-trend positive">
          <mat-icon>trending_up</mat-icon>
          <span>+8.2% from last session</span>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <mat-progress-bar mode="determinate" value="60" color="accent"></mat-progress-bar>
      </mat-card-actions>
    </mat-card>

    <!-- Dominant Emotion -->
    <mat-card
      appearance="outlined"
      class="kpi-card"
      tabindex="0"
      role="button"
    >
      <mat-card-header>
        <div mat-card-avatar class="kpi-avatar orders">
          <mat-icon>mood</mat-icon>
        </div>
        <mat-card-title>Happy</mat-card-title>
        <mat-card-subtitle>Most Detected Emotion</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="kpi-trend positive">
          <mat-icon>trending_up</mat-icon>
          <span>+3.1% dominance</span>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <mat-progress-bar mode="determinate" value="45" color="warn"></mat-progress-bar>
      </mat-card-actions>
    </mat-card>

    <!-- Detection Accuracy -->
    <mat-card
      appearance="outlined"
      class="kpi-card"
      tabindex="0"
      role="button"
    >
      <mat-card-header>
        <div mat-card-avatar class="kpi-avatar conversion">
          <mat-icon>psychology</mat-icon>
        </div>
        <mat-card-title>92%</mat-card-title>
        <mat-card-subtitle>Detection Accuracy</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="kpi-trend positive">
          <mat-icon>trending_up</mat-icon>
          <span>+5.4% improvement</span>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <mat-progress-bar mode="determinate" value="85" color="primary"></mat-progress-bar>
      </mat-card-actions>
    </mat-card>
  </div>

  <div class="charts-section">
    <mat-card appearance="outlined" class="chart-card">
      <mat-card-header>
        <mat-card-title>Emotion Trend Analysis</mat-card-title>
        <mat-card-subtitle>Detected emotions over time</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <canvas #revenueChart></canvas>
      </mat-card-content>
    </mat-card>

    <mat-card appearance="outlined" class="chart-card">
      <mat-card-header>
        <mat-card-title>Emotion Distribution</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <canvas #userChart></canvas>
      </mat-card-content>
    </mat-card>
  </div>

  <div class="analytics-grid"></div>
</div>
